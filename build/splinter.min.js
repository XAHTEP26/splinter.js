!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Splinter=t()}(this,function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e&&(e instanceof Element||"string"==typeof e)){this._el="string"==typeof e?document.querySelector(e):e,this._elements=[],this._words=[],this._chars=[];var n={mode:"words",ignore:void 0};this._props=function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}({},n,t),this._init()}else console.error("The first argument must be an Element or a string.")}var e,t,n;return e=o,n=[{key:"_splitText",value:function(e){for(var t,n=/\s+/g,r=[],o=0;t=n.exec(e);)o<t.index&&r.push({type:"word",text:e.substring(o,t.index)}),r.push({type:"space",text:t[0]}),o=t.index+t[0].length;return o<e.length&&r.push({type:"word",text:e.substring(o)}),r}},{key:"_buildNode",value:function(e,t){var n=document.createElement(e);return n.textContent=t,n.style.display="inline-block",n}},{key:"NODE_NAME",get:function(){return"span"}}],(t=[{key:"_init",value:function(){for(var e=document.createTreeWalker(this._el,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,this._createNodeFilter(this._props.ignore),!1),t=null===e.nextNode(),n=e.currentNode;!t;)t=null===e.nextNode(),this._transformNode(n),n=e.currentNode}},{key:"_createNodeFilter",value:function(t){var e={acceptNode:function(e){return NodeFilter.FILTER_ACCEPT}};return"function"==typeof t&&(e.acceptNode=function(e){return e.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:t(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),"string"==typeof t&&(e.acceptNode=function(e){return e.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:e.matches(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),e}},{key:"_transformNode",value:function(e){e.nodeType===Node.TEXT_NODE?this._transformTextNode(e):this._transformElementNode(e)}},{key:"_transformElementNode",value:function(e){this._elements.push(e)}},{key:"_transformTextNode",value:function(e){var t=o._splitText(e.textContent);if(t.length&&(1!==t.length||"space"!==t[0].type)){for(var n,r=document.createDocumentFragment();n=t.shift();)r.appendChild("word"===n.type?this._buildWordNode(n.text):document.createTextNode(n.text));e.parentNode.replaceChild(r,e)}}},{key:"_buildCharNode",value:function(e){var t=o._buildNode(o.NODE_NAME,e);return this._chars.push(t),t}},{key:"_buildWordNode",value:function(e){var t=this,n=o._buildNode(o.NODE_NAME);return"words"===this._props.mode?(n.textContent=e,this._words.push(n)):1===e.length?(n.textContent=e,this._words.push(n),this._chars.push(n)):(e.split("").forEach(function(e){return n.appendChild(t._buildCharNode(e))}),this._words.push(n)),n}},{key:"elements",get:function(){return this._elements}},{key:"words",get:function(){return this._words}},{key:"chars",get:function(){return this._chars}}])&&r(e.prototype,t),n&&r(e,n),o}()});
